using System.Text;
using Quarer;

// Outputs a QR code to the console.
/*

██████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████
████████              ██    ██    ██              ████████
████████  ██████████  ██  ████  ████  ██████████  ████████
████████  ██      ██  ████  ██  ████  ██      ██  ████████
████████  ██      ██  ██        ████  ██      ██  ████████
████████  ██      ██  ██████  ██████  ██      ██  ████████
████████  ██████████  ████    ██████  ██████████  ████████
████████              ██  ██  ██  ██              ████████
████████████████████████    ██████████████████████████████
████████  ██    ██      ██    ██████  ████  ██    ████████
████████  ██      ████  ████  ██    ██████    ██  ████████
████████          ██    ██    ██    ██  ██████    ████████
████████    ██      ██    ██████  ██████    ██  ██████████
████████████████      ██    ██  ████    ████████  ████████
████████████████████████  ████  ██  ████  ██  ██  ████████
████████              ██  ██  ██████  ██  ████████████████
████████  ██████████  ██    ████    ██  ██    ████████████
████████  ██      ██  ████  ██████  ██          ██████████
████████  ██      ██  ██      ██    ██████      ██████████
████████  ██      ██  ██    ██    ██    ████  ████████████
████████  ██████████  ████  ██  ██        ██████  ████████
████████              ██  ██            ████  ████████████
██████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████
██████████████████████████████████████████████████████████

*/

Console.WriteLine("Encoding \"Hello, World!\"");

var qrCode = QrCode.Create("Hello, World");

var sb = new StringBuilder();

OutputYPadding(sb, qrCode.Width);
for (var y = 0; y < qrCode.Height; y++)
{
    for (var x = -4; x < qrCode.Width + 4; x++)
    {
        if (x < 0 || x >= qrCode.Width)
        {
            sb.Append("██");
            continue;
        }

        var v = qrCode.Data[x, y] != 0;
        var s = v ? "  " : "██";
        sb.Append(s);
    }
    sb.AppendLine();
}
OutputYPadding(sb, qrCode.Width);

Console.WriteLine(sb.ToString());

static void OutputYPadding(StringBuilder sb, int width)
{
    for (var y = 0; y < 4; y++)
    {
        for (var x = 0; x < width + 8; x++)
        {
            sb.Append('█');
            sb.Append('█');
        }
        sb.AppendLine();
    }
}
